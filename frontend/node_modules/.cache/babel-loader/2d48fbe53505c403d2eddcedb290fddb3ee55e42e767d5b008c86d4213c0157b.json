{"ast":null,"code":"import React,{useEffect,useState}from\"react\";import apiClient from\"../api/apiClient\";import{RefreshCcw}from\"lucide-react\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function Dashboard(){const[stats,setStats]=useState(null);const[loading,setLoading]=useState(true);const[lastRefresh,setLastRefresh]=useState(null);const fetchStats=async()=>{try{const res=await apiClient.get(\"/stats\");setStats(res.data);setLastRefresh(new Date().toLocaleTimeString());setLoading(false);}catch(err){console.error(\"❌ Stats Error:\",err);}};useEffect(()=>{fetchStats();const interval=setInterval(fetchStats,10000);// auto refresh\nreturn()=>clearInterval(interval);},[]);if(loading)return/*#__PURE__*/_jsx(\"div\",{className:\"text-center mt-20 text-lg\",children:\"Loading stats...\"});// Tailwind color map fix\nconst colorMap={indigo:{border:\"border-indigo-500\",text:\"text-indigo-600\",dark:\"dark:text-indigo-400\"},green:{border:\"border-green-500\",text:\"text-green-600\",dark:\"dark:text-green-400\"},yellow:{border:\"border-yellow-500\",text:\"text-yellow-600\",dark:\"dark:text-yellow-400\"},purple:{border:\"border-purple-500\",text:\"text-purple-600\",dark:\"dark:text-purple-400\"}};const cards=[{title:\"Publishers\",value:stats.publishers,color:\"indigo\"},{title:\"Advertisers\",value:stats.advertisers,color:\"green\"},{title:\"Offers\",value:stats.offers,color:\"yellow\"},{title:\"Conversions\",value:stats.conversions,color:\"purple\"}];return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center mb-6\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-semibold text-gray-700 dark:text-white\",children:\"Live Stats\"}),/*#__PURE__*/_jsxs(\"button\",{onClick:fetchStats,className:\"flex items-center gap-2 bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 transition\",children:[/*#__PURE__*/_jsx(RefreshCcw,{size:18}),\" Refresh Now\"]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"grid md:grid-cols-4 gap-6\",children:cards.map(card=>{const styles=colorMap[card.color];return/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white dark:bg-gray-800 rounded-lg shadow p-6 text-center border-t-4 \".concat(styles.border),children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-gray-600 dark:text-gray-300 text-lg\",children:card.title}),/*#__PURE__*/_jsx(\"p\",{className:\"text-3xl font-bold mt-2 \".concat(styles.text,\" \").concat(styles.dark),children:card.value})]},card.title);})}),/*#__PURE__*/_jsxs(\"p\",{className:\"mt-4 text-sm text-gray-500 dark:text-gray-300\",children:[\"Last updated: \",lastRefresh]})]});}","map":{"version":3,"names":["React","useEffect","useState","apiClient","RefreshCcw","jsx","_jsx","jsxs","_jsxs","Dashboard","stats","setStats","loading","setLoading","lastRefresh","setLastRefresh","fetchStats","res","get","data","Date","toLocaleTimeString","err","console","error","interval","setInterval","clearInterval","className","children","colorMap","indigo","border","text","dark","green","yellow","purple","cards","title","value","publishers","color","advertisers","offers","conversions","onClick","size","map","card","styles","concat"],"sources":["C:/Users/Dell/mob13r-platform/frontend/src/pages/Dashboard.jsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport apiClient from \"../api/apiClient\";\nimport { RefreshCcw } from \"lucide-react\";\n\nexport default function Dashboard() {\n  const [stats, setStats] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [lastRefresh, setLastRefresh] = useState(null);\n\n  const fetchStats = async () => {\n    try {\n      const res = await apiClient.get(\"/stats\");\n      setStats(res.data);\n      setLastRefresh(new Date().toLocaleTimeString());\n      setLoading(false);\n    } catch (err) {\n      console.error(\"❌ Stats Error:\", err);\n    }\n  };\n\n  useEffect(() => {\n    fetchStats();\n    const interval = setInterval(fetchStats, 10000); // auto refresh\n    return () => clearInterval(interval);\n  }, []);\n\n  if (loading)\n    return <div className=\"text-center mt-20 text-lg\">Loading stats...</div>;\n\n  // Tailwind color map fix\n  const colorMap = {\n    indigo: {\n      border: \"border-indigo-500\",\n      text: \"text-indigo-600\",\n      dark: \"dark:text-indigo-400\",\n    },\n    green: {\n      border: \"border-green-500\",\n      text: \"text-green-600\",\n      dark: \"dark:text-green-400\",\n    },\n    yellow: {\n      border: \"border-yellow-500\",\n      text: \"text-yellow-600\",\n      dark: \"dark:text-yellow-400\",\n    },\n    purple: {\n      border: \"border-purple-500\",\n      text: \"text-purple-600\",\n      dark: \"dark:text-purple-400\",\n    },\n  };\n\n  const cards = [\n    { title: \"Publishers\", value: stats.publishers, color: \"indigo\" },\n    { title: \"Advertisers\", value: stats.advertisers, color: \"green\" },\n    { title: \"Offers\", value: stats.offers, color: \"yellow\" },\n    { title: \"Conversions\", value: stats.conversions, color: \"purple\" },\n  ];\n\n  return (\n    <div>\n      <div className=\"flex justify-between items-center mb-6\">\n        <h2 className=\"text-2xl font-semibold text-gray-700 dark:text-white\">\n          Live Stats\n        </h2>\n\n        <button\n          onClick={fetchStats}\n          className=\"flex items-center gap-2 bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 transition\"\n        >\n          <RefreshCcw size={18} /> Refresh Now\n        </button>\n      </div>\n\n      <div className=\"grid md:grid-cols-4 gap-6\">\n        {cards.map((card) => {\n          const styles = colorMap[card.color];\n          return (\n            <div\n              key={card.title}\n              className={`bg-white dark:bg-gray-800 rounded-lg shadow p-6 text-center border-t-4 ${styles.border}`}\n            >\n              <h3 className=\"text-gray-600 dark:text-gray-300 text-lg\">\n                {card.title}\n              </h3>\n              <p className={`text-3xl font-bold mt-2 ${styles.text} ${styles.dark}`}>\n                {card.value}\n              </p>\n            </div>\n          );\n        })}\n      </div>\n\n      <p className=\"mt-4 text-sm text-gray-500 dark:text-gray-300\">\n        Last updated: {lastRefresh}\n      </p>\n    </div>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}